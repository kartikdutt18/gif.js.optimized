!function(o,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.GIF=r():o.GIF=r()}(this,function(){return function(o){function r(n){if(t[n])return t[n].exports;var f=t[n]={exports:{},id:n,loaded:!1};return o[n].call(f.exports,f,f.exports,r),f.loaded=!0,f.exports}var t={};return r.m=o,r.c=t,r.p="",r(0)}([function(o,r){function t(o){return~~o}function n(o,r,n){function l(){E=[],H=[],J=[],K=[],L=[];var o,r;for(o=0;o<e;o++)r=(o<<i+8)/e,E[o]=[r,r,r],K[o]=c/e,J[o]=0}function x(){for(var o=0;o<e;o++)E[o][0]>>=i,E[o][1]>>=i,E[o][2]>>=i,E[o][3]=o}function M(o,r,t,n,f){E[r][0]-=o*(E[r][0]-t)/y,E[r][1]-=o*(E[r][1]-n)/y,E[r][2]-=o*(E[r][2]-f)/y}function j(o,r,t,n,f){for(var a,i,u=Math.abs(r-o),c=Math.min(r+o,e),p=r+1,s=r-1,v=1;p<c||s>u;)i=L[v++],p<c&&(a=E[p++],a[0]-=i*(a[0]-t)/C,a[1]-=i*(a[1]-n)/C,a[2]-=i*(a[2]-f)/C),s>u&&(a=E[s--],a[0]-=i*(a[0]-t)/C,a[1]-=i*(a[1]-n)/C,a[2]-=i*(a[2]-f)/C)}function g(o,r,t){o|=0,r|=0,t|=0;var n,f,a,c,l,h=~(1<<31),x=h,b=-1,m=b;for(n=0;n<e;n++)f=E[n],a=Math.abs((0|f[0])-o)+Math.abs((0|f[1])-r)+Math.abs((0|f[2])-t)|0,a<h&&(h=a,b=n),c=a-((0|J[n])>>u-i),c<x&&(x=c,m=n),l=K[n]>>s,K[n]-=l,J[n]+=l<<p;return K[b]+=v,J[b]-=d,m}function q(){var o,r,t,n,f,i,u=0,c=0;for(o=0;o<e;o++){for(t=E[o],f=o,i=t[1],r=o+1;r<e;r++)n=E[r],n[1]<i&&(f=r,i=n[1]);if(n=E[f],o!=f&&(r=n[0],n[0]=t[0],t[0]=r,r=n[1],n[1]=t[1],t[1]=r,r=n[2],n[2]=t[2],t[2]=r,r=n[3],n[3]=t[3],t[3]=r),i!=u){for(H[u]=c+o>>1,r=u+1;r<i;r++)H[r]=o;u=i,c=o}}for(H[u]=c+a>>1,r=u+1;r<256;r++)H[r]=a}function w(o,r,t){o|=0,r|=0,t|=0;for(var n,f,a,i=1e3,u=-1,c=0|H[r],p=c-1;c<e||p>=0;)c<e&&(f=E[c],a=(0|f[1])-r,a>=i?c=e:(c++,a<0&&(a=-a),n=(0|f[0])-o,n<0&&(n=-n),a+=n,a<i&&(n=(0|f[2])-t,n<0&&(n=-n),a+=n,a<i&&(i=a,u=0|f[3])))),p>=0&&(f=E[p],a=r-(0|f[1]),a>=i?p=-1:(p--,a<0&&(a=-a),n=(0|f[0])-o,n<0&&(n=-n),a+=n,a<i&&(n=(0|f[2])-t,n<0&&(n=-n),a+=n,a<i&&(i=a,u=0|f[3]))));return u}function z(){var n,e=o.length,a=t(30+(r-1)/3),u=t(e/(3*r)),c=t(u/f),p=y,s=b,v=s>>h;for(v<=1&&(v=0),n=0;n<v;n++)L[n]=t(p*((v*v-n*n)*G/(v*v)));var d;e<R?(r=1,d=3):d=e%F!==0?3*F:e%I!==0?3*I:e%k!==0?3*k:3*B;var l,x,C,q,w=0;for(n=0;n<u;)if(l=(255&o[w])<<i,x=(255&o[w+1])<<i,C=(255&o[w+2])<<i,q=g(l,x,C),M(p,q,l,x,C),0!==v&&j(v,q,l,x,C),w+=d,w>=e&&(w-=e),n++,0===c&&(c=1),n%c===0)for(p-=p/a,s-=s/m,v=s>>h,v<=1&&(v=0),q=0;q<v;q++)L[q]=t(p*((v*v-q*q)*G/(v*v)))}function A(){l(),z(),x(),q()}function D(){for(var o=[],r=[],t=0;t<e;t++)r[E[t][3]]=t;for(var n=0,f=0;f<e;f++){var a=r[f];o[n++]=E[a][0],o[n++]=E[a][1],o[n++]=E[a][2]}return o}n&&(e-=1,a-=1);var E,H,J,K,L;this.buildColormap=A,this.getColormap=D,this.lookupRGB=w}var f=100,e=256,a=e-1,i=4,u=16,c=1<<u,p=10,s=10,v=c>>s,d=c<<p-s,l=e>>3,h=6,x=1<<h,b=l*x,m=30,M=10,y=1<<M,j=8,G=1<<j,g=M+j,C=1<<g,F=499,I=491,k=487,B=503,R=3*B;o.exports=n}])});
//# sourceMappingURL=neuquant.js.map
!function(t){function i(r){if(e[r])return e[r].exports;var s=e[r]={exports:{},id:r,loaded:!1};return t[r].call(s.exports,s,s.exports,i),s.loaded=!0,s.exports}var e={};return i.m=t,i.c=e,i.p="",i(0)}([function(t,i,e){var r,s;r=e(1),s=function(t){var i,e,s,n,a;return i=new r(t.width,t.height),0===t.index?i.writeHeader():i.firstFrame=!1,i.setDispose(t.dispose),i.setTransparencyDifferenceThreshold(t.transparencyDifferenceThreshold),i.setApplyTransparencyOptimization(t.applyTransparencyOptimization),i.setApplyCropOptimization(t.applyCropOptimization),s=t.previousFrameData?t.previousFrameData:null,i.setTransparent(t.transparent),i.setRepeat(t.repeat),i.setDelay(t.delay),i.setQuality(t.quality),i.setDither(t.dither),i.setGlobalPalette(t.globalPalette),i.addFrame(t.data,s),t.last&&i.finish(),t.globalPalette===!0&&(t.globalPalette=i.getGlobalPalette()),n=i.stream(),t.data=n.pages,t.cursor=n.cursor,t.pageSize=n.constructor.pageSize,t.canTransfer?(a=function(){var i,r,s,n;for(s=t.data,n=[],i=0,r=s.length;i<r;i++)e=s[i],n.push(e.buffer);return n}(),self.postMessage(t,a)):self.postMessage(t)},self.onmessage=function(t){return s(t.data)},t.exports=s},function(t,i,e){function r(){this.page=-1,this.pages=[],this.newPage()}function s(t,i,e){for(var r=new Uint8Array(i*e*3),s=0,n=0,a=0;a<e;a++)for(var o=0;o<i;o++)r[n++]=t[s++],r[n++]=t[s++],r[n++]=t[s++],s++;return r}function n(t,i,e){const r=function(t){return t*t};return r(t[e]-i[e])+r(t[e+1]-i[e+1])+r(t[e+2]-i[e+2])}function a(t,i,e){return Math.abs(t[e]-i[e])+Math.abs(t[e+1]-i[e+1])+Math.abs(t[e+2]-i[e+2])}function o(t,i){this.width=~~t,this.height=~~i,this.transparent=null,this.transIndex=0,this.repeat=-1,this.delay=0,this.image=null,this.pixels=null,this.indexedPixels=null,this.colorDepth=null,this.colorTab=null,this.neuQuant=null,this.usedEntry=new Array,this.palSize=7,this.dispose=-1,this.firstFrame=!0,this.sample=10,this.dither=!1,this.globalPalette=!1,this.transIndexValue=Math.pow(2,this.palSize+1)-1,this.applyCropOptimization=!1,this.transparencyDifferenceThreshold=1,this.applyTransparencyOptimization=!1,this.xOffset=0,this.yOffset=0,this.yEnd=this.height-1,this.xEnd=this.width-1,this.out=new r}var h=e(2),l=e(3);r.pageSize=4096,r.charMap={};for(var p=0;p<256;p++)r.charMap[p]=String.fromCharCode(p);r.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(r.pageSize),this.cursor=0},r.prototype.getData=function(){for(var t="",i=0;i<this.pages.length;i++)for(var e=0;e<r.pageSize;e++)t+=r.charMap[this.pages[i][e]];return t},r.prototype.writeByte=function(t){this.cursor>=r.pageSize&&this.newPage(),this.pages[this.page][this.cursor++]=t},r.prototype.writeUTFBytes=function(t){for(var i=t.length,e=0;e<i;e++)this.writeByte(t.charCodeAt(e))},r.prototype.writeBytes=function(t,i,e){for(var r=e||t.length,s=i||0;s<r;s++)this.writeByte(t[s])},o.prototype.setApplyTransparencyOptimization=function(t){this.applyTransparencyOptimization=t},o.prototype.setTransparencyDifferenceThreshold=function(t){this.transparencyDifferenceThreshold=t},o.prototype.setApplyCropOptimization=function(t){this.applyCropOptimization=t},o.prototype.setDelay=function(t){this.delay=Math.round(t/10)},o.prototype.setFrameRate=function(t){this.delay=Math.round(100/t)},o.prototype.setDispose=function(t){t>=0&&(this.dispose=t)},o.prototype.setRepeat=function(t){this.repeat=t},o.prototype.setTransparent=function(t){this.transparent=t},o.prototype.addFrame=function(t,i){this.image=t,this.colorTab=this.globalPalette&&this.globalPalette.slice?this.globalPalette:null,this.getImagePixels();var e=null;i&&(e=s(i,this.width,this.height)),this.analyzePixels(e),this.globalPalette===!0&&(this.globalPalette=this.colorTab),this.firstFrame&&(this.writeLSD(),this.writePalette(),this.repeat>=0&&this.writeNetscapeExt()),this.writeGraphicCtrlExt(),this.writeImageDesc(),this.firstFrame||this.globalPalette||this.writePalette(),this.writePixels(),this.firstFrame=!1},o.prototype.finish=function(){this.out.writeByte(59)},o.prototype.setQuality=function(t){t<1&&(t=1),this.sample=t},o.prototype.setDither=function(t){t===!0&&(t="FloydSteinberg"),this.dither=t},o.prototype.setGlobalPalette=function(t){this.globalPalette=t},o.prototype.getGlobalPalette=function(){return this.globalPalette&&this.globalPalette.slice&&this.globalPalette.slice(0)||this.globalPalette},o.prototype.writeHeader=function(){this.out.writeUTFBytes("GIF89a")},o.prototype.analyzePixels=function(t){this.colorTab||(this.neuQuant=new h(this.pixels,this.sample,!0),this.neuQuant.buildColormap(),this.colorTab=this.neuQuant.getColormap()),this.dither?this.ditherPixels(this.dither.replace("-serpentine",""),null!==this.dither.match(/-serpentine/),t):this.indexPixels(t),this.applyCropOptimization&&t&&this.cropIndexedPixels(),this.pixels=null,this.colorDepth=8,this.palSize=7,this.applyTransparencyOptimization?this.transIndex=this.transIndexValue:null!==this.transparent&&(this.transIndex=this.findClosest(this.transparent,!0))},o.prototype.indexPixels=function(t){var i=this.pixels.length/3;this.indexedPixels=new Uint8Array(i);for(var e=0,r=0,s=0;s<i;s++){var n=-1;t&&a(this.pixels,t,e)<this.transparencyDifferenceThreshold&&(r+=1,n=this.transIndexValue,e+=3),n==-1&&(n=this.findClosestRGB(255&this.pixels[e++],255&this.pixels[e++],255&this.pixels[e++])),this.usedEntry[n]=!0,this.indexedPixels[s]=n}},o.prototype.cropIndexedPixels=function(){for(;this.yOffset<this.yEnd;){for(var t=!0,i=0;i<this.width;i++)if(this.indexedPixels[this.width*this.yOffset+i]!==this.transIndexValue){t=!1;break}if(!t)break;this.yOffset++}for(;this.yEnd>this.yOffset;){for(var t=!0,i=0;i<this.width;i++)if(this.indexedPixels[this.width*this.yEnd+i]!==this.transIndexValue){t=!1;break}if(!t)break;this.yEnd--}for(;this.xOffset<this.xEnd;){for(var t=!0,i=this.yOffset;i<this.yEnd;i++)if(this.indexedPixels[this.width*i+this.xOffset]!==this.transIndexValue){t=!1;break}if(!t)break;this.xOffset++}for(;this.xEnd>this.xOffset;){for(var t=!0,i=this.yOffset;i<this.yEnd;i++)if(this.indexedPixels[this.width*i+this.xEnd]!==this.transIndexValue){t=!1;break}if(!t)break;this.xEnd--}},o.prototype.calculateAndPropogateErrorDither=function(t,i,e,r,s){var n={FalseFloydSteinberg:[[3/8,1,0],[3/8,0,1],[.25,1,1]],FloydSteinberg:[[7/16,1,0],[3/16,-1,1],[5/16,0,1],[1/16,1,1]],Stucki:[[8/42,1,0],[4/42,2,0],[2/42,-2,1],[4/42,-1,1],[8/42,0,1],[4/42,1,1],[2/42,2,1],[1/42,-2,2],[2/42,-1,2],[4/42,0,2],[2/42,1,2],[1/42,2,2]],Atkinson:[[1/8,1,0],[1/8,2,0],[1/8,-1,1],[1/8,0,1],[1/8,1,1],[1/8,0,2]]};if(!r||!n[r])throw"Unknown dithering kernel: "+r;var a=n[r],o=s?-1:1,h=e*this.width+i,l=3*h,p=t[l],f=t[l+1],u=t[l+2],c=this.findClosestRGB(p,f,u);l=3*c;for(var y=this.colorTab[l],d=this.colorTab[l+1],w=this.colorTab[l+2],x=p-y,g=f-d,b=u-w,v=1==o?0:a.length-1,m=1==o?a.length:0;v!==m;v+=o){var P=a[v][1],B=a[v][2];if(P+i>=0&&P+i<this.width&&B+e>=0&&B+e<this.height){var T=a[v][0];l=h+P+B*this.width,l*=3,t[l]=Math.max(0,Math.min(255,t[l]+x*T)),t[l+1]=Math.max(0,Math.min(255,t[l+1]+g*T)),t[l+2]=Math.max(0,Math.min(255,t[l+2]+b*T))}}return c},o.prototype.ditherPixels=function(t,i,e){var r=0,s=this.height,a=this.width,o=(this.pixels,i?-1:1);this.indexedPixels=new Uint8Array(this.pixels.length/3);for(var h=0;h<s;h++){i&&(o*=-1);for(var l=1==o?0:a-1,p=1==o?a:0;l!==p;l+=o){r=h*a+l;var f=this.calculateAndPropogateErrorDither(this.pixels,l,h,t,i);if(e){var u=this.calculateAndPropogateErrorDither(e,l,h,t,i);(f===u||n(this.pixels,e,3*r)<this.transparencyDifferenceThreshold*this.transparencyDifferenceThreshold)&&(f=this.transIndexValue)}this.usedEntry[f]=!0,this.indexedPixels[r]=f}}},o.prototype.findClosest=function(t,i){return this.findClosestRGB((16711680&t)>>16,(65280&t)>>8,255&t,i)},o.prototype.findClosestRGB=function(t,i,e,r){if(null===this.colorTab)return-1;if(this.neuQuant&&!r)return this.neuQuant.lookupRGB(t,i,e);for(var s=0,n=16777216,a=this.colorTab.length,o=0,h=0;o<a;h++){var l=t-(255&this.colorTab[o++]),p=i-(255&this.colorTab[o++]),f=e-(255&this.colorTab[o++]),u=l*l+p*p+f*f;(!r||this.usedEntry[h])&&u<n&&(n=u,s=h)}return s},o.prototype.getImagePixels=function(){var t=this.width,i=this.height;this.pixels=new Uint8Array(t*i*3);for(var e=this.image,r=0,s=0,n=0;n<i;n++)for(var a=0;a<t;a++)this.pixels[s++]=e[r++],this.pixels[s++]=e[r++],this.pixels[s++]=e[r++],r++},o.prototype.writeGraphicCtrlExt=function(){this.out.writeByte(33),this.out.writeByte(249),this.out.writeByte(4);var t,i;null===this.transparent?(t=0,i=0):(t=1,i=2),this.applyTransparencyOptimization&&(i=1,t=1),this.dispose>=0&&(i=7&this.dispose),i<<=2,this.out.writeByte(0|i|0|t),this.writeShort(this.delay),this.out.writeByte(this.transIndex),this.out.writeByte(0)},o.prototype.writeImageDesc=function(){var t=this.yEnd-this.yOffset+1,i=this.xEnd-this.xOffset+1;this.out.writeByte(44),this.writeShort(this.xOffset),this.writeShort(this.yOffset),this.writeShort(i),this.writeShort(t),this.firstFrame||this.globalPalette?this.out.writeByte(0):this.out.writeByte(128|this.palSize)},o.prototype.writeLSD=function(){this.writeShort(this.width),this.writeShort(this.height),this.out.writeByte(240|this.palSize),this.out.writeByte(0),this.out.writeByte(0)},o.prototype.writeNetscapeExt=function(){this.out.writeByte(33),this.out.writeByte(255),this.out.writeByte(11),this.out.writeUTFBytes("NETSCAPE2.0"),this.out.writeByte(3),this.out.writeByte(1),this.writeShort(this.repeat),this.out.writeByte(0)},o.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);for(var t=768-this.colorTab.length,i=0;i<t;i++)this.out.writeByte(0)},o.prototype.writeShort=function(t){this.out.writeByte(255&t),this.out.writeByte(t>>8&255)},o.prototype.writePixels=function(){for(var t=this.yEnd-this.yOffset+1,i=this.xEnd-this.xOffset+1,e=new Uint8Array(i*t),r=0,s=this.yOffset;s<=this.yEnd;s++)e.set(this.indexedPixels.slice(s*this.width+this.xOffset,s*this.width+this.xOffset+i),r),r+=i;var n=new l(i,t,e,this.colorDepth);n.encode(this.out)},o.prototype.stream=function(){return this.out},t.exports=o},function(t,i){function e(t,i,e){function c(){F=[],k=new Int32Array(256),G=new Int32Array(s),U=new Int32Array(s),R=new Int32Array(s>>3);var t,i;for(t=0;t<s;t++)i=(t<<a+8)/s,F[t]=new Float64Array([i,i,i,0]),U[t]=h/s,G[t]=0}function d(){for(var t=0;t<s;t++)F[t][0]>>=a,F[t][1]>>=a,F[t][2]>>=a,F[t][3]=t}function g(t,i,e,r,s){F[i][0]-=t*(F[i][0]-e)/b,F[i][1]-=t*(F[i][1]-r)/b,F[i][2]-=t*(F[i][2]-s)/b}function v(t,i,e,r,n){for(var a,o,h=Math.abs(i-t),l=Math.min(i+t,s),p=i+1,f=i-1,u=1;p<l||f>h;)o=R[u++],p<l&&(a=F[p++],a[0]-=o*(a[0]-e)/B,a[1]-=o*(a[1]-r)/B,a[2]-=o*(a[2]-n)/B),f>h&&(a=F[f--],a[0]-=o*(a[0]-e)/B,a[1]-=o*(a[1]-r)/B,a[2]-=o*(a[2]-n)/B)}function P(t,i,e){t|=0,i|=0,e|=0;var r,n,h,c,y,d=~(1<<31),w=d,x=-1,g=x;for(r=0;r<s;r++)n=F[r],h=Math.abs((0|n[0])-t)+Math.abs((0|n[1])-i)+Math.abs((0|n[2])-e)|0,h<d&&(d=h,x=r),c=h-((0|G[r])>>o-a),c<w&&(w=c,g=r),y=U[r]>>p,U[r]-=y,G[r]+=y<<l;return U[x]+=f,G[x]-=u,g}function z(){var t,i,e,r,a,o,h=0,l=0;for(t=0;t<s;t++){for(e=F[t],a=t,o=e[1],i=t+1;i<s;i++)r=F[i],r[1]<o&&(a=i,o=r[1]);if(r=F[a],t!=a&&(i=r[0],r[0]=e[0],e[0]=i,i=r[1],r[1]=e[1],e[1]=i,i=r[2],r[2]=e[2],e[2]=i,i=r[3],r[3]=e[3],e[3]=i),o!=h){for(k[h]=l+t>>1,i=h+1;i<o;i++)k[i]=t;h=o,l=t}}for(k[h]=l+n>>1,i=h+1;i<256;i++)k[i]=n}function A(t,i,e){t|=0,i|=0,e|=0;for(var r,n,a,o=1e3,h=-1,l=0|k[i],p=l-1;l<s||p>=0;)l<s&&(n=F[l],a=(0|n[1])-i,a>=o?l=s:(l++,a<0&&(a=-a),r=(0|n[0])-t,r<0&&(r=-r),a+=r,a<o&&(r=(0|n[2])-e,r<0&&(r=-r),a+=r,a<o&&(o=a,h=0|n[3])))),p>=0&&(n=F[p],a=i-(0|n[1]),a>=o?p=-1:(p--,a<0&&(a=-a),r=(0|n[0])-t,r<0&&(r=-r),a+=r,a<o&&(r=(0|n[2])-e,r<0&&(r=-r),a+=r,a<o&&(o=a,h=0|n[3]))));return h}function I(){var e,s=t.length,n=30+(i-1)/3,o=s/(3*i),h=~~(o/r),l=b,p=w,f=p>>y;for(f<=1&&(f=0),e=0;e<f;e++)R[e]=l*((f*f-e*e)*m/(f*f));var u;s<D?(i=1,u=3):u=s%T!==0?3*T:s%O!==0?3*O:s%E!==0?3*E:3*S;var c,d,B,z,A=0;for(e=0;e<o;)if(c=(255&t[A])<<a,d=(255&t[A+1])<<a,B=(255&t[A+2])<<a,z=P(c,d,B),g(l,z,c,d,B),0!==f&&v(f,z,c,d,B),A+=u,A>=s&&(A-=s),e++,0===h&&(h=1),e%h===0)for(l-=l/n,p-=p/x,f=p>>y,f<=1&&(f=0),z=0;z<f;z++)R[z]=l*((f*f-z*z)*m/(f*f))}function M(){c(),I(),d(),z()}function C(){for(var t=[],i=[],e=0;e<s;e++)i[F[e][3]]=e;for(var r=0,n=0;n<s;n++){var a=i[n];t[r++]=F[a][0],t[r++]=F[a][1],t[r++]=F[a][2]}return t}e&&(s-=1,n-=1);var F,k,G,U,R;this.buildColormap=M,this.getColormap=C,this.lookupRGB=A}var r=100,s=256,n=s-1,a=4,o=16,h=1<<o,l=10,p=10,f=h>>p,u=h<<l-p,c=s>>3,y=6,d=1<<y,w=c*d,x=30,g=10,b=1<<g,v=8,m=1<<v,P=g+v,B=1<<P,T=499,O=491,E=487,S=503,D=3*S;t.exports=e},function(t,i){function e(t,i,e,o){function h(t,i){T[g++]=t,g>=254&&c(i)}function l(t){p(n),D=m+2,z=!0,w(m,t)}function p(t){for(var i=0;i<t;++i)O[i]=-1}function f(t,i){var e,a,o,h,f,u,c;for(v=t,z=!1,n_bits=v,b=y(n_bits),m=1<<t-1,P=m+1,D=m+2,g=0,h=d(),c=0,e=n;e<65536;e*=2)++c;c=8-c,u=n,p(u),w(m,i);t:for(;(a=d())!=r;)if(e=(a<<s)+h,o=a<<c^h,O[o]!==e){if(O[o]>=0){f=u-o,0===o&&(f=1);do if((o-=f)<0&&(o+=u),O[o]===e){h=E[o];continue t}while(O[o]>=0)}w(h,i),h=a,D<1<<s?(E[o]=D++,O[o]=e):l(i)}else h=E[o];w(h,i),w(P,i)}function u(e){e.writeByte(B),remaining=t*i,curPixel=0,f(B+1,e),e.writeByte(0)}function c(t){g>0&&(t.writeByte(g),t.writeBytes(T,0,g),g=0)}function y(t){return(1<<t)-1}function d(){if(0===remaining)return r;--remaining;var t=e[curPixel++];return 255&t}function w(t,i){for(x&=a[S],S>0?x|=t<<S:x=t,S+=n_bits;S>=8;)h(255&x,i),x>>=8,S-=8;if((D>b||z)&&(z?(b=y(n_bits=v),z=!1):(++n_bits,b=n_bits==s?1<<s:y(n_bits))),t==P){for(;S>0;)h(255&x,i),x>>=8,S-=8;c(i)}}var x,g,b,v,m,P,B=Math.max(2,o),T=new Uint8Array(256),O=new Int32Array(n),E=new Int32Array(n),S=0,D=0,z=!1;this.encode=u}var r=-1,s=12,n=5003,a=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];t.exports=e}]);
//# sourceMappingURL=gif.worker.js.map
!function(t){function i(s){if(e[s])return e[s].exports;var r=e[s]={exports:{},id:s,loaded:!1};return t[s].call(r.exports,r,r.exports,i),r.loaded=!0,r.exports}var e={};return i.m=t,i.c=e,i.p="",i(0)}([function(t,i,e){var s,r;s=e(1),r=function(t){var i,e,r,n,o;return i=new s(t.width,t.height),0===t.index?i.writeHeader():i.firstFrame=!1,null!=t.dispose&&i.setDispose(t.dispose),i.setApplyCropOptimization(t.applyCropOptimization),r=t.previousFrameData?t.previousFrameData:null,i.setTransparent(t.transparent),i.setRepeat(t.repeat),i.setDelay(t.delay),i.setQuality(t.quality),i.setDither(t.dither),i.setGlobalPalette(t.globalPalette),i.addFrame(t.data,r),t.last&&i.finish(),t.globalPalette===!0&&(t.globalPalette=i.getGlobalPalette()),n=i.stream(),t.data=n.pages,t.cursor=n.cursor,t.pageSize=n.constructor.pageSize,t.canTransfer?(o=function(){var i,s,r,n;for(r=t.data,n=[],i=0,s=r.length;i<s;i++)e=r[i],n.push(e.buffer);return n}(),self.postMessage(t,o)):self.postMessage(t)},self.onmessage=function(t){return r(t.data)},t.exports=r},function(t,i,e){function s(){this.page=-1,this.pages=[],this.newPage()}function r(t,i,e){for(var s=new Uint8Array(i*e*3),r=0,n=0,o=0;o<e;o++)for(var h=0;h<i;h++)s[n++]=t[r++],s[n++]=t[r++],s[n++]=t[r++],r++;return s}function n(t,i,e){return Math.abs(t[e]-i[e])+Math.abs(t[e+1]-i[e+1])+Math.abs(t[e+2]-i[e+2])}function o(t,i){this.width=~~t,this.height=~~i,this.transparent=null,this.transIndex=0,this.repeat=-1,this.delay=0,this.image=null,this.pixels=null,this.indexedPixels=null,this.colorDepth=null,this.colorTab=null,this.neuQuant=null,this.usedEntry=new Array,this.palSize=7,this.dispose=1,this.firstFrame=!0,this.sample=10,this.dither=!1,this.globalPalette=!1,this.transIndexValue=Math.pow(2,this.palSize+1)-1,this.applyCropOptimization=!1,this.xOffset=0,this.yOffset=0,this.yEnd=this.height-1,this.xEnd=this.width-1,this.out=new s}var h=e(2),a=e(3);s.pageSize=4096,s.charMap={};for(var l=0;l<256;l++)s.charMap[l]=String.fromCharCode(l);s.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(s.pageSize),this.cursor=0},s.prototype.getData=function(){for(var t="",i=0;i<this.pages.length;i++)for(var e=0;e<s.pageSize;e++)t+=s.charMap[this.pages[i][e]];return t},s.prototype.writeByte=function(t){this.cursor>=s.pageSize&&this.newPage(),this.pages[this.page][this.cursor++]=t},s.prototype.writeUTFBytes=function(t){for(var i=t.length,e=0;e<i;e++)this.writeByte(t.charCodeAt(e))},s.prototype.writeBytes=function(t,i,e){for(var s=e||t.length,r=i||0;r<s;r++)this.writeByte(t[r])},o.prototype.setApplyCropOptimization=function(t){this.applyCropOptimization=t},o.prototype.setDelay=function(t){this.delay=Math.round(t/10)},o.prototype.setFrameRate=function(t){this.delay=Math.round(100/t)},o.prototype.setDispose=function(t){t>=0&&(this.dispose=t)},o.prototype.setRepeat=function(t){this.repeat=t},o.prototype.setTransparent=function(t){this.transparent=t},o.prototype.addFrame=function(t,i){this.image=t,this.colorTab=this.globalPalette&&this.globalPalette.slice?this.globalPalette:null,this.getImagePixels();var e=null;i&&(e=r(i,this.width,this.height)),this.analyzePixels(e),this.globalPalette===!0&&(this.globalPalette=this.colorTab),this.firstFrame&&(this.writeLSD(),this.writePalette(),this.repeat>=0&&this.writeNetscapeExt()),this.writeGraphicCtrlExt(),this.writeImageDesc(),this.firstFrame||this.globalPalette||this.writePalette(),this.writePixels(),this.firstFrame=!1},o.prototype.finish=function(){this.out.writeByte(59)},o.prototype.setQuality=function(t){t<1&&(t=1),this.sample=t},o.prototype.setDither=function(t){t===!0&&(t="FloydSteinberg"),this.dither=t},o.prototype.setGlobalPalette=function(t){this.globalPalette=t},o.prototype.getGlobalPalette=function(){return this.globalPalette&&this.globalPalette.slice&&this.globalPalette.slice(0)||this.globalPalette},o.prototype.writeHeader=function(){this.out.writeUTFBytes("GIF89a")},o.prototype.analyzePixels=function(t){this.colorTab||(this.neuQuant=new h(this.pixels,this.sample),this.neuQuant.buildColormap(),this.colorTab=this.neuQuant.getColormap()),this.dither?this.ditherPixels(this.dither.replace("-serpentine",""),null!==this.dither.match(/-serpentine/)):(this.indexPixels(t),this.applyCropOptimization&&t&&this.cropIndexedPixels()),this.pixels=null,this.colorDepth=8,this.palSize=7,null!==this.transparent&&(this.transIndex=this.transIndexValue)},o.prototype.indexPixels=function(t){var i=this.pixels.length/3;this.indexedPixels=new Uint8Array(i);for(var e=0,s=0,r=0;r<i;r++){var o=-1;t&&n(this.pixels,t,e)<1&&(s+=1,o=this.transIndexValue,e+=3),o==-1&&(o=this.findClosestRGB(255&this.pixels[e++],255&this.pixels[e++],255&this.pixels[e++])),this.usedEntry[o]=!0,this.indexedPixels[r]=o}},o.prototype.cropIndexedPixels=function(){for(;this.yOffset<this.yEnd;){for(var t=!0,i=0;i<this.width;i++)if(this.indexedPixels[this.width*this.yOffset+i]!==this.transIndexValue){t=!1;break}if(!t)break;this.yOffset++}for(;this.yEnd>this.yOffset;){for(var t=!0,i=0;i<this.width;i++)if(this.indexedPixels[this.width*this.yEnd+i]!==this.transIndexValue){t=!1;break}if(!t)break;this.yEnd--}for(;this.xOffset<this.xEnd;){for(var t=!0,i=this.yOffset;i<this.yEnd;i++)if(this.indexedPixels[this.width*i+this.xOffset]!==this.transIndexValue){t=!1;break}if(!t)break;this.xOffset++}for(;this.xEnd>this.xOffset;){for(var t=!0,i=this.yOffset;i<this.yEnd;i++)if(this.indexedPixels[this.width*i+this.xEnd]!==this.transIndexValue){t=!1;break}if(!t)break;this.xEnd--}},o.prototype.ditherPixels=function(t,i){var e={FalseFloydSteinberg:[[3/8,1,0],[3/8,0,1],[.25,1,1]],FloydSteinberg:[[7/16,1,0],[3/16,-1,1],[5/16,0,1],[1/16,1,1]],Stucki:[[8/42,1,0],[4/42,2,0],[2/42,-2,1],[4/42,-1,1],[8/42,0,1],[4/42,1,1],[2/42,2,1],[1/42,-2,2],[2/42,-1,2],[4/42,0,2],[2/42,1,2],[1/42,2,2]],Atkinson:[[1/8,1,0],[1/8,2,0],[1/8,-1,1],[1/8,0,1],[1/8,1,1],[1/8,0,2]]};if(!t||!e[t])throw"Unknown dithering kernel: "+t;var s=e[t],r=0,n=this.height,o=this.width,h=this.pixels,a=i?-1:1;this.indexedPixels=new Uint8Array(this.pixels.length/3);for(var l=0;l<n;l++){i&&(a*=-1);for(var f=1==a?0:o-1,p=1==a?o:0;f!==p;f+=a){r=l*o+f;var u=3*r,y=h[u],d=h[u+1],c=h[u+2];u=this.findClosestRGB(y,d,c),this.usedEntry[u]=!0,this.indexedPixels[r]=u,u*=3;for(var w=this.colorTab[u],x=this.colorTab[u+1],g=this.colorTab[u+2],b=y-w,v=d-x,P=c-g,m=1==a?0:s.length-1,B=1==a?s.length:0;m!==B;m+=a){var S=s[m][1],E=s[m][2];if(S+f>=0&&S+f<o&&E+l>=0&&E+l<n){var O=s[m][0];u=r+S+E*o,u*=3,h[u]=Math.max(0,Math.min(255,h[u]+b*O)),h[u+1]=Math.max(0,Math.min(255,h[u+1]+v*O)),h[u+2]=Math.max(0,Math.min(255,h[u+2]+P*O))}}}}},o.prototype.findClosest=function(t,i){return this.findClosestRGB((16711680&t)>>16,(65280&t)>>8,255&t,i)},o.prototype.findClosestRGB=function(t,i,e,s){if(null===this.colorTab)return-1;if(this.neuQuant&&!s)return this.neuQuant.lookupRGB(t,i,e);for(var r=0,n=16777216,o=this.colorTab.length,h=0,a=0;h<o;a++){var l=t-(255&this.colorTab[h++]),f=i-(255&this.colorTab[h++]),p=e-(255&this.colorTab[h++]),u=l*l+f*f+p*p;(!s||this.usedEntry[a])&&u<n&&(n=u,r=a)}return r},o.prototype.getImagePixels=function(){var t=this.width,i=this.height;this.pixels=new Uint8Array(t*i*3);for(var e=this.image,s=0,r=0,n=0;n<i;n++)for(var o=0;o<t;o++)this.pixels[r++]=e[s++],this.pixels[r++]=e[s++],this.pixels[r++]=e[s++],s++},o.prototype.writeGraphicCtrlExt=function(){this.out.writeByte(33),this.out.writeByte(249),this.out.writeByte(4);var t,i;null===this.transparent?(t=0,i=0):(t=1,i=2),this.dispose>=0&&(i=7&this.dispose),i<<=2,this.out.writeByte(0|i|0|t),this.writeShort(this.delay),this.out.writeByte(this.transIndex),this.out.writeByte(0)},o.prototype.writeImageDesc=function(){var t=this.yEnd-this.yOffset+1,i=this.xEnd-this.xOffset+1;this.out.writeByte(44),this.writeShort(this.xOffset),this.writeShort(this.yOffset),this.writeShort(i),this.writeShort(t),this.firstFrame||this.globalPalette?this.out.writeByte(0):this.out.writeByte(128|this.palSize)},o.prototype.writeLSD=function(){this.writeShort(this.width),this.writeShort(this.height),this.out.writeByte(240|this.palSize),this.out.writeByte(0),this.out.writeByte(0)},o.prototype.writeNetscapeExt=function(){this.out.writeByte(33),this.out.writeByte(255),this.out.writeByte(11),this.out.writeUTFBytes("NETSCAPE2.0"),this.out.writeByte(3),this.out.writeByte(1),this.writeShort(this.repeat),this.out.writeByte(0)},o.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);for(var t=768-this.colorTab.length,i=0;i<t;i++)this.out.writeByte(0)},o.prototype.writeShort=function(t){this.out.writeByte(255&t),this.out.writeByte(t>>8&255)},o.prototype.writePixels=function(){for(var t=this.yEnd-this.yOffset+1,i=this.xEnd-this.xOffset+1,e=new Uint8Array(i*t),s=0,r=this.yOffset;r<=this.yEnd;r++)e.set(this.indexedPixels.slice(r*this.width+this.xOffset,r*this.width+this.xOffset+i),s),s+=i;var n=new a(i,t,e,this.colorDepth);n.encode(this.out)},o.prototype.stream=function(){return this.out},t.exports=o},function(t,i){function e(t,i){function e(){z=[],D=new Int32Array(256),k=new Int32Array(r),G=new Int32Array(r),U=new Int32Array(r>>3);var t,i;for(t=0;t<r;t++)i=(t<<o+8)/r,z[t]=new Float64Array([i,i,i,0]),G[t]=a/r,k[t]=0}function y(){for(var t=0;t<r;t++)z[t][0]>>=o,z[t][1]>>=o,z[t][2]>>=o,z[t][3]=t}function c(t,i,e,s,r){z[i][0]-=t*(z[i][0]-e)/b,z[i][1]-=t*(z[i][1]-s)/b,z[i][2]-=t*(z[i][2]-r)/b}function g(t,i,e,s,n){for(var o,h,a=Math.abs(i-t),l=Math.min(i+t,r),f=i+1,p=i-1,u=1;f<l||p>a;)h=U[u++],f<l&&(o=z[f++],o[0]-=h*(o[0]-e)/B,o[1]-=h*(o[1]-s)/B,o[2]-=h*(o[2]-n)/B),p>a&&(o=z[p--],o[0]-=h*(o[0]-e)/B,o[1]-=h*(o[1]-s)/B,o[2]-=h*(o[2]-n)/B)}function v(t,i,e){t|=0,i|=0,e|=0;var s,n,a,y,d,c=~(1<<31),w=c,x=-1,g=x;for(s=0;s<r;s++)n=z[s],a=Math.abs((0|n[0])-t)+Math.abs((0|n[1])-i)+Math.abs((0|n[2])-e)|0,a<c&&(c=a,x=s),y=a-((0|k[s])>>h-o),y<w&&(w=y,g=s),d=G[s]>>f,G[s]-=d,k[s]+=d<<l;return G[x]+=p,k[x]-=u,g}function m(){var t,i,e,s,o,h,a=0,l=0;for(t=0;t<r;t++){for(e=z[t],o=t,h=e[1],i=t+1;i<r;i++)s=z[i],s[1]<h&&(o=i,h=s[1]);if(s=z[o],t!=o&&(i=s[0],s[0]=e[0],e[0]=i,i=s[1],s[1]=e[1],e[1]=i,i=s[2],s[2]=e[2],e[2]=i,i=s[3],s[3]=e[3],e[3]=i),h!=a){for(D[a]=l+t>>1,i=a+1;i<h;i++)D[i]=t;a=h,l=t}}for(D[a]=l+n>>1,i=a+1;i<256;i++)D[i]=n}function T(t,i,e){t|=0,i|=0,e|=0;for(var s,n,o,h=1e3,a=-1,l=0|D[i],f=l-1;l<r||f>=0;)l<r&&(n=z[l],o=(0|n[1])-i,o>=h?l=r:(l++,o<0&&(o=-o),s=(0|n[0])-t,s<0&&(s=-s),o+=s,o<h&&(s=(0|n[2])-e,s<0&&(s=-s),o+=s,o<h&&(h=o,a=0|n[3])))),f>=0&&(n=z[f],o=i-(0|n[1]),o>=h?f=-1:(f--,o<0&&(o=-o),s=(0|n[0])-t,s<0&&(s=-s),o+=s,o<h&&(s=(0|n[2])-e,s<0&&(s=-s),o+=s,o<h&&(h=o,a=0|n[3]))));return a}function C(){var e,r=t.length,n=30+(i-1)/3,h=r/(3*i),a=~~(h/s),l=b,f=w,p=f>>d;for(p<=1&&(p=0),e=0;e<p;e++)U[e]=l*((p*p-e*e)*P/(p*p));var u;r<M?(i=1,u=3):u=r%S!==0?3*S:r%E!==0?3*E:r%O!==0?3*O:3*I;var y,m,B,T,C=0;for(e=0;e<h;)if(y=(255&t[C])<<o,m=(255&t[C+1])<<o,B=(255&t[C+2])<<o,T=v(y,m,B),c(l,T,y,m,B),0!==p&&g(p,T,y,m,B),C+=u,C>=r&&(C-=r),e++,0===a&&(a=1),e%a===0)for(l-=l/n,f-=f/x,p=f>>d,p<=1&&(p=0),T=0;T<p;T++)U[T]=l*((p*p-T*T)*P/(p*p))}function A(){e(),C(),y(),m()}function F(){for(var t=[],i=[],e=0;e<r;e++)i[z[e][3]]=e;for(var s=0,n=0;n<r;n++){var o=i[n];t[s++]=z[o][0],t[s++]=z[o][1],t[s++]=z[o][2]}return t}var z,D,k,G,U;this.buildColormap=A,this.getColormap=F,this.lookupRGB=T}var s=100,r=256,n=r-1,o=4,h=16,a=1<<h,l=10,f=10,p=a>>f,u=a<<l-f,y=r>>3,d=6,c=1<<d,w=y*c,x=30,g=10,b=1<<g,v=8,P=1<<v,m=g+v,B=1<<m,S=499,E=491,O=487,I=503,M=3*I;t.exports=e},function(t,i){function e(t,i,e,h){function a(t,i){S[g++]=t,g>=254&&y(i)}function l(t){f(n),M=P+2,T=!0,w(P,t)}function f(t){for(var i=0;i<t;++i)E[i]=-1}function p(t,i){var e,o,h,a,p,u,y;for(v=t,T=!1,n_bits=v,b=d(n_bits),P=1<<t-1,m=P+1,M=P+2,g=0,a=c(),y=0,e=n;e<65536;e*=2)++y;y=8-y,u=n,f(u),w(P,i);t:for(;(o=c())!=s;)if(e=(o<<r)+a,h=o<<y^a,E[h]!==e){if(E[h]>=0){p=u-h,0===h&&(p=1);do if((h-=p)<0&&(h+=u),E[h]===e){a=O[h];continue t}while(E[h]>=0)}w(a,i),a=o,M<1<<r?(O[h]=M++,E[h]=e):l(i)}else a=O[h];w(a,i),w(m,i)}function u(e){e.writeByte(B),remaining=t*i,curPixel=0,p(B+1,e),e.writeByte(0)}function y(t){g>0&&(t.writeByte(g),t.writeBytes(S,0,g),g=0)}function d(t){return(1<<t)-1}function c(){if(0===remaining)return s;--remaining;var t=e[curPixel++];return 255&t}function w(t,i){for(x&=o[I],I>0?x|=t<<I:x=t,I+=n_bits;I>=8;)a(255&x,i),x>>=8,I-=8;if((M>b||T)&&(T?(b=d(n_bits=v),T=!1):(++n_bits,b=n_bits==r?1<<r:d(n_bits))),t==m){for(;I>0;)a(255&x,i),x>>=8,I-=8;y(i)}}var x,g,b,v,P,m,B=Math.max(2,h),S=new Uint8Array(256),E=new Int32Array(n),O=new Int32Array(n),I=0,M=0,T=!1;this.encode=u}var s=-1,r=12,n=5003,o=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];t.exports=e}]);
//# sourceMappingURL=gif.worker.js.map
!function(t){function i(s){if(e[s])return e[s].exports;var r=e[s]={exports:{},id:s,loaded:!1};return t[s].call(r.exports,r,r.exports,i),r.loaded=!0,r.exports}var e={};return i.m=t,i.c=e,i.p="",i(0)}([function(t,i,e){var s,r;s=e(1),r=function(t){var i,e,r,n,a;return i=new s(t.width,t.height),0===t.index?i.writeHeader():i.firstFrame=!1,null!=t.dispose&&i.setDispose(t.dispose),i.setTransparencyDifferenceThreshold(t.transparencyDifferenceThreshold),i.setApplyTransparencyOptimization(t.applyTransparencyOptimization),i.setApplyCropOptimization(t.applyCropOptimization),r=t.previousFrameData?t.previousFrameData:null,i.setTransparent(t.transparent),i.setRepeat(t.repeat),i.setDelay(t.delay),i.setQuality(t.quality),i.setDither(t.dither),i.setGlobalPalette(t.globalPalette),i.addFrame(t.data,r),t.last&&i.finish(),t.globalPalette===!0&&(t.globalPalette=i.getGlobalPalette()),n=i.stream(),t.data=n.pages,t.cursor=n.cursor,t.pageSize=n.constructor.pageSize,t.canTransfer?(a=function(){var i,s,r,n;for(r=t.data,n=[],i=0,s=r.length;i<s;i++)e=r[i],n.push(e.buffer);return n}(),self.postMessage(t,a)):self.postMessage(t)},self.onmessage=function(t){return r(t.data)},t.exports=r},function(t,i,e){function s(){this.page=-1,this.pages=[],this.newPage()}function r(t,i,e){for(var s=new Uint8Array(i*e*3),r=0,n=0,a=0;a<e;a++)for(var o=0;o<i;o++)s[n++]=t[r++],s[n++]=t[r++],s[n++]=t[r++],r++;return s}function n(t,i,e){return Math.abs(t[e]-i[e])+Math.abs(t[e+1]-i[e+1])+Math.abs(t[e+2]-i[e+2])}function a(t,i){this.width=~~t,this.height=~~i,this.transparent=null,this.transIndex=0,this.repeat=-1,this.delay=0,this.image=null,this.pixels=null,this.indexedPixels=null,this.colorDepth=null,this.colorTab=null,this.neuQuant=null,this.usedEntry=new Array,this.palSize=7,this.dispose=-1,this.firstFrame=!0,this.sample=10,this.dither=!1,this.globalPalette=!1,this.transIndexValue=Math.pow(2,this.palSize+1)-1,this.applyCropOptimization=!1,this.transparencyDifferenceThreshold=1,this.applyTransparencyOptimization=!1,this.xOffset=0,this.yOffset=0,this.yEnd=this.height-1,this.xEnd=this.width-1,this.out=new s}var o=e(2),h=e(3);s.pageSize=4096,s.charMap={};for(var l=0;l<256;l++)s.charMap[l]=String.fromCharCode(l);s.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(s.pageSize),this.cursor=0},s.prototype.getData=function(){for(var t="",i=0;i<this.pages.length;i++)for(var e=0;e<s.pageSize;e++)t+=s.charMap[this.pages[i][e]];return t},s.prototype.writeByte=function(t){this.cursor>=s.pageSize&&this.newPage(),this.pages[this.page][this.cursor++]=t},s.prototype.writeUTFBytes=function(t){for(var i=t.length,e=0;e<i;e++)this.writeByte(t.charCodeAt(e))},s.prototype.writeBytes=function(t,i,e){for(var s=e||t.length,r=i||0;r<s;r++)this.writeByte(t[r])},a.prototype.setApplyTransparencyOptimization=function(t){this.applyTransparencyOptimization=t},a.prototype.setTransparencyDifferenceThreshold=function(t){this.transparencyDifferenceThreshold=t},a.prototype.setApplyCropOptimization=function(t){this.applyCropOptimization=t},a.prototype.setDelay=function(t){this.delay=Math.round(t/10)},a.prototype.setFrameRate=function(t){this.delay=Math.round(100/t)},a.prototype.setDispose=function(t){t>=0&&(this.dispose=t)},a.prototype.setRepeat=function(t){this.repeat=t},a.prototype.setTransparent=function(t){this.transparent=t},a.prototype.addFrame=function(t,i){this.image=t,this.colorTab=this.globalPalette&&this.globalPalette.slice?this.globalPalette:null,this.getImagePixels();var e=null;i&&(e=r(i,this.width,this.height)),this.analyzePixels(e),this.globalPalette===!0&&(this.globalPalette=this.colorTab),this.firstFrame&&(this.writeLSD(),this.writePalette(),this.repeat>=0&&this.writeNetscapeExt()),this.writeGraphicCtrlExt(),this.writeImageDesc(),this.firstFrame||this.globalPalette||this.writePalette(),this.writePixels(),this.firstFrame=!1},a.prototype.finish=function(){this.out.writeByte(59)},a.prototype.setQuality=function(t){t<1&&(t=1),this.sample=t},a.prototype.setDither=function(t){t===!0&&(t="FloydSteinberg"),this.dither=t},a.prototype.setGlobalPalette=function(t){this.globalPalette=t},a.prototype.getGlobalPalette=function(){return this.globalPalette&&this.globalPalette.slice&&this.globalPalette.slice(0)||this.globalPalette},a.prototype.writeHeader=function(){this.out.writeUTFBytes("GIF89a")},a.prototype.analyzePixels=function(t){this.colorTab||(this.neuQuant=new o(this.pixels,this.sample,!0),this.neuQuant.buildColormap(),this.colorTab=this.neuQuant.getColormap()),this.dither?this.ditherPixels(this.dither.replace("-serpentine",""),null!==this.dither.match(/-serpentine/)):(this.indexPixels(t),this.applyCropOptimization&&t&&this.cropIndexedPixels()),this.pixels=null,this.colorDepth=8,this.palSize=7,this.applyTransparencyOptimization?this.transIndex=this.transIndexValue:null!==this.transparent&&(this.transIndex=this.findClosest(this.transparent,!0))},a.prototype.indexPixels=function(t){var i=this.pixels.length/3;this.indexedPixels=new Uint8Array(i);for(var e=0,s=0,r=0;r<i;r++){var a=-1;t&&n(this.pixels,t,e)<this.transparencyDifferenceThreshold&&(s+=1,a=this.transIndexValue,e+=3),a==-1&&(a=this.findClosestRGB(255&this.pixels[e++],255&this.pixels[e++],255&this.pixels[e++])),this.usedEntry[a]=!0,this.indexedPixels[r]=a}},a.prototype.cropIndexedPixels=function(){for(;this.yOffset<this.yEnd;){for(var t=!0,i=0;i<this.width;i++)if(this.indexedPixels[this.width*this.yOffset+i]!==this.transIndexValue){t=!1;break}if(!t)break;this.yOffset++}for(;this.yEnd>this.yOffset;){for(var t=!0,i=0;i<this.width;i++)if(this.indexedPixels[this.width*this.yEnd+i]!==this.transIndexValue){t=!1;break}if(!t)break;this.yEnd--}for(;this.xOffset<this.xEnd;){for(var t=!0,i=this.yOffset;i<this.yEnd;i++)if(this.indexedPixels[this.width*i+this.xOffset]!==this.transIndexValue){t=!1;break}if(!t)break;this.xOffset++}for(;this.xEnd>this.xOffset;){for(var t=!0,i=this.yOffset;i<this.yEnd;i++)if(this.indexedPixels[this.width*i+this.xEnd]!==this.transIndexValue){t=!1;break}if(!t)break;this.xEnd--}},a.prototype.ditherPixels=function(t,i){var e={FalseFloydSteinberg:[[3/8,1,0],[3/8,0,1],[.25,1,1]],FloydSteinberg:[[7/16,1,0],[3/16,-1,1],[5/16,0,1],[1/16,1,1]],Stucki:[[8/42,1,0],[4/42,2,0],[2/42,-2,1],[4/42,-1,1],[8/42,0,1],[4/42,1,1],[2/42,2,1],[1/42,-2,2],[2/42,-1,2],[4/42,0,2],[2/42,1,2],[1/42,2,2]],Atkinson:[[1/8,1,0],[1/8,2,0],[1/8,-1,1],[1/8,0,1],[1/8,1,1],[1/8,0,2]]};if(!t||!e[t])throw"Unknown dithering kernel: "+t;var s=e[t],r=0,n=this.height,a=this.width,o=this.pixels,h=i?-1:1;this.indexedPixels=new Uint8Array(this.pixels.length/3);for(var l=0;l<n;l++){i&&(h*=-1);for(var p=1==h?0:a-1,f=1==h?a:0;p!==f;p+=h){r=l*a+p;var u=3*r,y=o[u],c=o[u+1],d=o[u+2];u=this.findClosestRGB(y,c,d),this.usedEntry[u]=!0,this.indexedPixels[r]=u,u*=3;for(var w=this.colorTab[u],x=this.colorTab[u+1],g=this.colorTab[u+2],b=y-w,v=c-x,m=d-g,P=1==h?0:s.length-1,B=1==h?s.length:0;P!==B;P+=h){var T=s[P][1],O=s[P][2];if(T+p>=0&&T+p<a&&O+l>=0&&O+l<n){var S=s[P][0];u=r+T+O*a,u*=3,o[u]=Math.max(0,Math.min(255,o[u]+b*S)),o[u+1]=Math.max(0,Math.min(255,o[u+1]+v*S)),o[u+2]=Math.max(0,Math.min(255,o[u+2]+m*S))}}}}},a.prototype.findClosest=function(t,i){return this.findClosestRGB((16711680&t)>>16,(65280&t)>>8,255&t,i)},a.prototype.findClosestRGB=function(t,i,e,s){if(null===this.colorTab)return-1;if(this.neuQuant&&!s)return this.neuQuant.lookupRGB(t,i,e);for(var r=0,n=16777216,a=this.colorTab.length,o=0,h=0;o<a;h++){var l=t-(255&this.colorTab[o++]),p=i-(255&this.colorTab[o++]),f=e-(255&this.colorTab[o++]),u=l*l+p*p+f*f;(!s||this.usedEntry[h])&&u<n&&(n=u,r=h)}return r},a.prototype.getImagePixels=function(){var t=this.width,i=this.height;this.pixels=new Uint8Array(t*i*3);for(var e=this.image,s=0,r=0,n=0;n<i;n++)for(var a=0;a<t;a++)this.pixels[r++]=e[s++],this.pixels[r++]=e[s++],this.pixels[r++]=e[s++],s++},a.prototype.writeGraphicCtrlExt=function(){this.out.writeByte(33),this.out.writeByte(249),this.out.writeByte(4);var t,i;null===this.transparent?(t=0,i=0):(t=1,i=2),this.applyTransparencyOptimization&&(i=1),this.dispose>=0&&(i=7&this.dispose),i<<=2,this.out.writeByte(0|i|0|t),this.writeShort(this.delay),this.out.writeByte(this.transIndex),this.out.writeByte(0)},a.prototype.writeImageDesc=function(){var t=this.yEnd-this.yOffset+1,i=this.xEnd-this.xOffset+1;this.out.writeByte(44),this.writeShort(this.xOffset),this.writeShort(this.yOffset),this.writeShort(i),this.writeShort(t),this.firstFrame||this.globalPalette?this.out.writeByte(0):this.out.writeByte(128|this.palSize)},a.prototype.writeLSD=function(){this.writeShort(this.width),this.writeShort(this.height),this.out.writeByte(240|this.palSize),this.out.writeByte(0),this.out.writeByte(0)},a.prototype.writeNetscapeExt=function(){this.out.writeByte(33),this.out.writeByte(255),this.out.writeByte(11),this.out.writeUTFBytes("NETSCAPE2.0"),this.out.writeByte(3),this.out.writeByte(1),this.writeShort(this.repeat),this.out.writeByte(0)},a.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);for(var t=768-this.colorTab.length,i=0;i<t;i++)this.out.writeByte(0)},a.prototype.writeShort=function(t){this.out.writeByte(255&t),this.out.writeByte(t>>8&255)},a.prototype.writePixels=function(){for(var t=this.yEnd-this.yOffset+1,i=this.xEnd-this.xOffset+1,e=new Uint8Array(i*t),s=0,r=this.yOffset;r<=this.yEnd;r++)e.set(this.indexedPixels.slice(r*this.width+this.xOffset,r*this.width+this.xOffset+i),s),s+=i;var n=new h(i,t,e,this.colorDepth);n.encode(this.out)},a.prototype.stream=function(){return this.out},t.exports=a},function(t,i){function e(t,i,e){function y(){F=[],k=new Int32Array(256),G=new Int32Array(r),U=new Int32Array(r),R=new Int32Array(r>>3);var t,i;for(t=0;t<r;t++)i=(t<<a+8)/r,F[t]=new Float64Array([i,i,i,0]),U[t]=h/r,G[t]=0}function d(){for(var t=0;t<r;t++)F[t][0]>>=a,F[t][1]>>=a,F[t][2]>>=a,F[t][3]=t}function g(t,i,e,s,r){F[i][0]-=t*(F[i][0]-e)/b,F[i][1]-=t*(F[i][1]-s)/b,F[i][2]-=t*(F[i][2]-r)/b}function v(t,i,e,s,n){for(var a,o,h=Math.abs(i-t),l=Math.min(i+t,r),p=i+1,f=i-1,u=1;p<l||f>h;)o=R[u++],p<l&&(a=F[p++],a[0]-=o*(a[0]-e)/B,a[1]-=o*(a[1]-s)/B,a[2]-=o*(a[2]-n)/B),f>h&&(a=F[f--],a[0]-=o*(a[0]-e)/B,a[1]-=o*(a[1]-s)/B,a[2]-=o*(a[2]-n)/B)}function P(t,i,e){t|=0,i|=0,e|=0;var s,n,h,y,c,d=~(1<<31),w=d,x=-1,g=x;for(s=0;s<r;s++)n=F[s],h=Math.abs((0|n[0])-t)+Math.abs((0|n[1])-i)+Math.abs((0|n[2])-e)|0,h<d&&(d=h,x=s),y=h-((0|G[s])>>o-a),y<w&&(w=y,g=s),c=U[s]>>p,U[s]-=c,G[s]+=c<<l;return U[x]+=f,G[x]-=u,g}function I(){var t,i,e,s,a,o,h=0,l=0;for(t=0;t<r;t++){for(e=F[t],a=t,o=e[1],i=t+1;i<r;i++)s=F[i],s[1]<o&&(a=i,o=s[1]);if(s=F[a],t!=a&&(i=s[0],s[0]=e[0],e[0]=i,i=s[1],s[1]=e[1],e[1]=i,i=s[2],s[2]=e[2],e[2]=i,i=s[3],s[3]=e[3],e[3]=i),o!=h){for(k[h]=l+t>>1,i=h+1;i<o;i++)k[i]=t;h=o,l=t}}for(k[h]=l+n>>1,i=h+1;i<256;i++)k[i]=n}function M(t,i,e){t|=0,i|=0,e|=0;for(var s,n,a,o=1e3,h=-1,l=0|k[i],p=l-1;l<r||p>=0;)l<r&&(n=F[l],a=(0|n[1])-i,a>=o?l=r:(l++,a<0&&(a=-a),s=(0|n[0])-t,s<0&&(s=-s),a+=s,a<o&&(s=(0|n[2])-e,s<0&&(s=-s),a+=s,a<o&&(o=a,h=0|n[3])))),p>=0&&(n=F[p],a=i-(0|n[1]),a>=o?p=-1:(p--,a<0&&(a=-a),s=(0|n[0])-t,s<0&&(s=-s),a+=s,a<o&&(s=(0|n[2])-e,s<0&&(s=-s),a+=s,a<o&&(o=a,h=0|n[3]))));return h}function A(){var e,r=t.length,n=30+(i-1)/3,o=r/(3*i),h=~~(o/s),l=b,p=w,f=p>>c;for(f<=1&&(f=0),e=0;e<f;e++)R[e]=l*((f*f-e*e)*m/(f*f));var u;r<z?(i=1,u=3):u=r%T!==0?3*T:r%O!==0?3*O:r%S!==0?3*S:3*E;var y,d,B,I,M=0;for(e=0;e<o;)if(y=(255&t[M])<<a,d=(255&t[M+1])<<a,B=(255&t[M+2])<<a,I=P(y,d,B),g(l,I,y,d,B),0!==f&&v(f,I,y,d,B),M+=u,M>=r&&(M-=r),e++,0===h&&(h=1),e%h===0)for(l-=l/n,p-=p/x,f=p>>c,f<=1&&(f=0),I=0;I<f;I++)R[I]=l*((f*f-I*I)*m/(f*f))}function C(){y(),A(),d(),I()}function D(){for(var t=[],i=[],e=0;e<r;e++)i[F[e][3]]=e;for(var s=0,n=0;n<r;n++){var a=i[n];t[s++]=F[a][0],t[s++]=F[a][1],t[s++]=F[a][2]}return t}e&&(r-=1,n-=1);var F,k,G,U,R;this.buildColormap=C,this.getColormap=D,this.lookupRGB=M}var s=100,r=256,n=r-1,a=4,o=16,h=1<<o,l=10,p=10,f=h>>p,u=h<<l-p,y=r>>3,c=6,d=1<<c,w=y*d,x=30,g=10,b=1<<g,v=8,m=1<<v,P=g+v,B=1<<P,T=499,O=491,S=487,E=503,z=3*E;t.exports=e},function(t,i){function e(t,i,e,o){function h(t,i){T[g++]=t,g>=254&&y(i)}function l(t){p(n),z=m+2,I=!0,w(m,t)}function p(t){for(var i=0;i<t;++i)O[i]=-1}function f(t,i){var e,a,o,h,f,u,y;for(v=t,I=!1,n_bits=v,b=c(n_bits),m=1<<t-1,P=m+1,z=m+2,g=0,h=d(),y=0,e=n;e<65536;e*=2)++y;y=8-y,u=n,p(u),w(m,i);t:for(;(a=d())!=s;)if(e=(a<<r)+h,o=a<<y^h,O[o]!==e){if(O[o]>=0){f=u-o,0===o&&(f=1);do if((o-=f)<0&&(o+=u),O[o]===e){h=S[o];continue t}while(O[o]>=0)}w(h,i),h=a,z<1<<r?(S[o]=z++,O[o]=e):l(i)}else h=S[o];w(h,i),w(P,i)}function u(e){e.writeByte(B),remaining=t*i,curPixel=0,f(B+1,e),e.writeByte(0)}function y(t){g>0&&(t.writeByte(g),t.writeBytes(T,0,g),g=0)}function c(t){return(1<<t)-1}function d(){if(0===remaining)return s;--remaining;var t=e[curPixel++];return 255&t}function w(t,i){for(x&=a[E],E>0?x|=t<<E:x=t,E+=n_bits;E>=8;)h(255&x,i),x>>=8,E-=8;if((z>b||I)&&(I?(b=c(n_bits=v),I=!1):(++n_bits,b=n_bits==r?1<<r:c(n_bits))),t==P){for(;E>0;)h(255&x,i),x>>=8,E-=8;y(i)}}var x,g,b,v,m,P,B=Math.max(2,o),T=new Uint8Array(256),O=new Int32Array(n),S=new Int32Array(n),E=0,z=0,I=!1;this.encode=u}var s=-1,r=12,n=5003,a=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];t.exports=e}]);
//# sourceMappingURL=gif.worker.js.map
!function(r,o){if("object"==typeof exports&&"object"==typeof module)module.exports=o();else if("function"==typeof define&&define.amd)define([],o);else{var t=o();for(var f in t)("object"==typeof exports?exports:r)[f]=t[f]}}(self,(()=>{return r={22:r=>{function o(r){return~~r}var t=256,f=t-1,n=64*(t>>3),e=1024,a=1<<18;r.exports=function(r,i,u){var v,s,c,p,l;function h(r,o,t,f,n){v[o][0]-=r*(v[o][0]-t)/e,v[o][1]-=r*(v[o][1]-f)/e,v[o][2]-=r*(v[o][2]-n)/e}function x(r,o,f,n,e){for(var i,u,s=Math.abs(o-r),c=Math.min(o+r,t),p=o+1,h=o-1,x=1;p<c||h>s;)u=l[x++],p<c&&((i=v[p++])[0]-=u*(i[0]-f)/a,i[1]-=u*(i[1]-n)/a,i[2]-=u*(i[2]-e)/a),h>s&&((i=v[h--])[0]-=u*(i[0]-f)/a,i[1]-=u*(i[1]-n)/a,i[2]-=u*(i[2]-e)/a)}function b(r,o,f){r|=0,o|=0,f|=0;var n,e,a,i,u,s=~(1<<31),l=s,h=-1,x=h;for(n=0;n<t;n++)e=v[n],(a=Math.abs((0|e[0])-r)+Math.abs((0|e[1])-o)+Math.abs((0|e[2])-f)|0)<s&&(s=a,h=n),(i=a-((0|c[n])>>12))<l&&(l=i,x=n),u=p[n]>>10,p[n]-=u,c[n]+=u<<10;return p[h]+=64,c[h]-=65536,x}u&&(t-=1,f-=1),this.buildColormap=function(){!function(){var r,o;for(v=[],s=[],c=[],p=[],l=[],r=0;r<t;r++)o=(r<<12)/t,v[r]=[o,o,o],p[r]=65536/t,c[r]=0}(),function(){var t,f,a,u,v,s,c=r.length,p=o(30+(i-1)/3),d=o(c/(3*i)),m=o(d/100),M=e,y=n,j=y>>6;for(j<=1&&(j=0),t=0;t<j;t++)l[t]=o(M*(256*(j*j-t*t)/(j*j)));c<1509?(i=1,f=3):f=c%499!=0?1497:c%491!=0?1473:c%487!=0?1461:1509;var g=0;for(t=0;t<d;)if(h(M,s=b(a=(255&r[g])<<4,u=(255&r[g+1])<<4,v=(255&r[g+2])<<4),a,u,v),0!==j&&x(j,s,a,u,v),(g+=f)>=c&&(g-=c),0===m&&(m=1),++t%m==0)for(M-=M/p,(j=(y-=y/30)>>6)<=1&&(j=0),s=0;s<j;s++)l[s]=o(M*(256*(j*j-s*s)/(j*j)))}(),function(){for(var r=0;r<t;r++)v[r][0]>>=4,v[r][1]>>=4,v[r][2]>>=4,v[r][3]=r}(),function(){var r,o,n,e,a,i,u=0,c=0;for(r=0;r<t;r++){for(a=r,i=(n=v[r])[1],o=r+1;o<t;o++)(e=v[o])[1]<i&&(a=o,i=e[1]);if(e=v[a],r!=a&&(o=e[0],e[0]=n[0],n[0]=o,o=e[1],e[1]=n[1],n[1]=o,o=e[2],e[2]=n[2],n[2]=o,o=e[3],e[3]=n[3],n[3]=o),i!=u){for(s[u]=c+r>>1,o=u+1;o<i;o++)s[o]=r;u=i,c=r}}for(s[u]=c+f>>1,o=u+1;o<256;o++)s[o]=f}()},this.getColormap=function(){for(var r=[],o=[],f=0;f<t;f++)o[v[f][3]]=f;for(var n=0,e=0;e<t;e++){var a=o[e];r[n++]=v[a][0],r[n++]=v[a][1],r[n++]=v[a][2]}return r},this.lookupRGB=function(r,o,f){var n,e,a;r|=0,f|=0;for(var i=1e3,u=-1,c=0|s[o|=0],p=c-1;c<t||p>=0;)c<t&&((a=(0|(e=v[c])[1])-o)>=i?c=t:(c++,a<0&&(a=-a),(n=(0|e[0])-r)<0&&(n=-n),(a+=n)<i&&((n=(0|e[2])-f)<0&&(n=-n),(a+=n)<i&&(i=a,u=0|e[3])))),p>=0&&((a=o-(0|(e=v[p])[1]))>=i?p=-1:(p--,a<0&&(a=-a),(n=(0|e[0])-r)<0&&(n=-n),(a+=n)<i&&((n=(0|e[2])-f)<0&&(n=-n),(a+=n)<i&&(i=a,u=0|e[3]))));return u}}}},o={},function t(f){var n=o[f];if(void 0!==n)return n.exports;var e=o[f]={exports:{}};return r[f](e,e.exports,t),e.exports}(22);var r,o}));
//# sourceMappingURL=neuquant.js.map